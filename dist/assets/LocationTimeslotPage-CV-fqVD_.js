import{c as W,d,e as m,r as a,j as e}from"./index-_3OQfKDT.js";import{P as V}from"./pen-CBq5KEz3.js";import{C as Y}from"./check-Dy89HfZ8.js";import{X as Z}from"./x-ChO8lI7J.js";function ae(){const r=W(d.locations.list),x=W(d.timeslots.list),F=m(d.locations.create),M=m(d.timeslots.create),Q=m(d.timeslots.update),[u,h]=a.useState(""),[g,b]=a.useState(""),[p,j]=a.useState(""),[N,v]=a.useState(""),[f,w]=a.useState(""),[y,T]=a.useState(""),[S,L]=a.useState(""),[E,C]=a.useState(""),[i,A]=a.useState([]),[o,c]=a.useState(null),[O,n]=a.useState([]),[_,k]=a.useState(""),[D,q]=a.useState(""),[I,P]=a.useState(""),R=async s=>{s.preventDefault(),await F({name:u,address:g}),h(""),b("")},U=s=>{A(l=>l.includes(s)?l.filter(t=>t!==s):[...l,s])},X=s=>{n(l=>l.includes(s)?l.filter(t=>t!==s):[...l,s])},z=async s=>{s.preventDefault(),await M({label:p,startTime:N,endTime:f,deliveryTime:y,availableLocationIds:i,orderStartTime:S,orderEndTime:E}),j(""),v(""),w(""),T(""),L(""),C(""),A([])},B=s=>{c(s._id),n(s.availableLocationIds),k(s.orderStartTime||""),q(s.orderEndTime||""),P(s.deliveryTime||"")},G=async()=>{o&&(await Q({id:o,availableLocationIds:O,orderStartTime:_,orderEndTime:D,deliveryTime:I}),c(null),n([]))},H=()=>{c(null),n([])};return!r||!x?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"space-y-12",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Locations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-2 grid grid-cols-1 gap-4",children:r.map(s=>e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:s.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:s.address})]})},s._id))}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border h-fit",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Add New Location"}),e.jsxs("form",{onSubmit:R,className:"space-y-3",children:[e.jsx("input",{placeholder:"Location Name",required:!0,className:"w-full border p-2 rounded",value:u,onChange:s=>h(s.target.value)}),e.jsx("input",{placeholder:"Address",required:!0,className:"w-full border p-2 rounded",value:g,onChange:s=>b(s.target.value)}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700",children:"Add Location"})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Time Slots"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-2 grid grid-cols-1 gap-4",children:x.map(s=>{const l=o===s._id;return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-blue-800",children:s.label}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Order: ",e.jsxs("span",{className:"font-mono",children:[s.startTime," - ",s.endTime]})]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Delivery: ",e.jsx("span",{className:"font-mono font-bold",children:s.deliveryTime})]}),s.orderStartTime&&s.orderEndTime&&e.jsxs("p",{className:"text-green-700 text-xs mt-1",children:["Ordering Window: ",e.jsxs("span",{className:"font-mono font-bold",children:[s.orderStartTime," - ",s.orderEndTime]})]})]}),e.jsx("div",{className:"flex gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:G,className:"text-green-600 hover:text-green-800 p-2 rounded hover:bg-green-50",title:"Save",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:H,className:"text-red-600 hover:text-red-800 p-2 rounded hover:bg-red-50",title:"Cancel",children:e.jsx(Z,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>B(s),className:"text-blue-600 hover:text-blue-800 p-2 rounded hover:bg-blue-50",title:"Edit locations",children:e.jsx(V,{className:"w-4 h-4"})})})]}),l?e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded border border-gray-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Ordering Window:"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Start"}),e.jsx("input",{type:"time",className:"w-full border p-1 rounded text-sm",value:_,onChange:t=>k(t.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"End"}),e.jsx("input",{type:"time",className:"w-full border p-1 rounded text-sm",value:D,onChange:t=>q(t.target.value)})]})]}),e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Delivery Time:"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"time",className:"w-full border p-1 rounded text-sm",value:I,onChange:t=>P(t.target.value)})}),e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Available Locations:"}),e.jsx("div",{className:"space-y-2",children:r?.map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-white p-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:O.includes(t._id),onChange:()=>X(t._id),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:t.name})]},t._id))})]}):e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.availableLocationIds.length===0?e.jsx("span",{className:"text-xs text-red-500 italic",children:"No locations assigned"}):s.availableLocationIds.map(t=>{const J=r?.find(K=>K._id===t);return e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:J?.name||"Unknown"},t)})})]},s._id)})}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border h-fit",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Add New Time Slot"}),e.jsxs("form",{onSubmit:z,className:"space-y-3",children:[e.jsx("input",{placeholder:"Label (e.g. Lunch 1)",required:!0,className:"w-full border p-2 rounded",value:p,onChange:s=>j(s.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Start Time"}),e.jsx("input",{type:"time",required:!0,className:"w-full border p-2 rounded",value:N,onChange:s=>v(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"End Time"}),e.jsx("input",{type:"time",required:!0,className:"w-full border p-2 rounded",value:f,onChange:s=>w(s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Delivery Time"}),e.jsx("input",{type:"time",required:!0,className:"w-full border p-2 rounded",value:y,onChange:s=>T(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t pt-2 mt-2",children:[e.jsx("div",{className:"col-span-2 text-xs font-semibold text-gray-700",children:"Ordering Window"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Start"}),e.jsx("input",{type:"time",className:"w-full border p-2 rounded",value:S,onChange:s=>L(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"End"}),e.jsx("input",{type:"time",className:"w-full border p-2 rounded",value:E,onChange:s=>C(s.target.value)})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 mb-2 block",children:"Available Locations"}),r&&r.length>0?e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto bg-gray-50 p-2 rounded border",children:r.map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-white p-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:i.includes(s._id),onChange:()=>U(s._id),className:"w-4 h-4 text-green-600 rounded focus:ring-2 focus:ring-green-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:s.name})]},s._id))}):e.jsx("p",{className:"text-xs text-gray-500 italic",children:"No locations available. Add locations first."}),i.length===0&&e.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"⚠️ Select at least one location"})]}),e.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white p-2 rounded hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:i.length===0,children:"Add Time Slot"})]})]})]})]})]})}export{ae as default};
