import{g as m,c as u,d as n,e as h,j as e,L as r,k as g}from"./index-_3OQfKDT.js";import{u as p}from"./use_paginated_query-7fQe0RvS.js";const y=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],f=m("chevron-right",y);function N(){const i=u(n.verification.getCurrentUser),{results:t,status:l,loadMore:d}=p(n.orders.getMyOrders,i?{userId:i._id}:"skip",{initialNumItems:5}),c=h(n.orders.updateStatus),o=async s=>{confirm("Are you sure you want to cancel this order?")&&await c({orderId:s,status:"cancelled"})};return!t&&l==="LoadingFirstPage"?e.jsx("div",{className:"text-center py-12",children:"Loading Orders..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-[#1B4332] font-serif",style:{fontFamily:"'Playfair Display', serif"},children:"Your Orders"}),!t||t.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-xl",children:[e.jsx("p",{className:"text-gray-500",children:"No past orders found."}),e.jsx(r,{to:"/home",className:"text-[#2E7D32] font-semibold mt-2 inline-block hover:underline",children:"Order Now"})]}):e.jsxs("div",{className:"space-y-4",children:[t.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 transition hover:shadow-md",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["#",s.invoiceNumber||"Order"]}),e.jsx("span",{className:g("px-2 py-0.5 rounded-full text-xs font-bold uppercase tracking-wide",s.status==="delivered"&&"bg-green-100 text-green-700",s.status==="confirmed"&&"bg-blue-100 text-blue-700",s.status==="pending"&&"bg-yellow-100 text-yellow-700",s.status==="cancelled"&&"bg-red-100 text-red-700"),children:s.status==="pending"?"Pending Confirmation":s.status})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(s.orderDate).toLocaleDateString()," at ",new Date(s.orderDate).toLocaleTimeString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),e.jsxs("p",{className:"text-xl font-bold text-[#1B4332]",children:["₹",s.totalAmount]})]})]}),e.jsx("div",{className:"my-4 border-t border-gray-50"}),e.jsx("div",{className:"space-y-2 mb-4",children:s.items.map((a,x)=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:[a.quantity,"x ",a.name]}),e.jsxs("span",{children:["₹",a.price*a.quantity]})]},x))}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.status==="pending"&&e.jsx("button",{onClick:()=>o(s._id),className:"text-red-500 text-sm font-semibold hover:text-red-600 transition",children:"Cancel Order"}),s.status!=="pending"&&e.jsx("div",{}),e.jsxs(r,{to:`/bill/${s._id}`,className:"flex items-center text-[#2E7D32] font-semibold text-sm hover:underline",children:["View Invoice ",e.jsx(f,{className:"w-4 h-4 ml-1"})]})]})]},s._id)),l==="CanLoadMore"&&e.jsx("button",{onClick:()=>d(5),className:"w-full py-2 bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100 transition font-medium",children:"Load More"})]})]})}export{N as default};
